# Pre-commit hooks for ctn_testing
# Install: uv pip install pre-commit && pre-commit install
# Run manually: pre-commit run --all-files

repos:
  - repo: local
    hooks:
      - id: check-secrets
        name: Check for secrets
        entry: bash scripts/check-secrets.sh
        language: system
        pass_filenames: false
        stages: [pre-commit]

      - id: ruff-check
        name: Ruff lint
        entry: uv run ruff check --fix
        language: system
        types: [python]
        pass_filenames: true

      - id: ruff-format
        name: Ruff format
        entry: uv run ruff format
        language: system
        types: [python]
        pass_filenames: true

      - id: pyright
        name: Pyright type check
        entry: uv run pyright
        language: system
        types: [python]
        pass_filenames: false

      - id: run-tests
        name: Run tests
        entry: uv run pytest tests/ -x -q
        language: system
        pass_filenames: false
        stages: [pre-commit]
